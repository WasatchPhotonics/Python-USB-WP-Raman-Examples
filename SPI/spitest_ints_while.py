import time
import random
import Adafruit_GPIO as GPIO
import Adafruit_GPIO.FT232H as FT232H
FT232H.use_FT232H()
# Find the first FT232H device.
ft232h = FT232H.FT232H()
# Create a SPI interface from the FT232H using pin 8 (C0) as chip select.
# Use a clock speed of 3mhz, SPI mode 0, and most significant bit first.
spi = FT232H.SPI(ft232h, cs=3, max_speed_hz=100000, mode=0, bitorder=FT232H.MSBFIRST)
# Write three bytes (0x01, 0x02, 0x03) out using the SPI protocol.

# generate from list of bytes, converting into string
'''import crc8
data = [0x00, 0x03, 0xe8, 0x91, 0x04]
hash = crc8.crc8()
hash.update("0x0491e80300")
print( hash.hexdigest() )'''

def bytes(integer):
    return divmod(integer, 0x100)

import crcmod.predefined
crc8 = crcmod.predefined.mkPredefinedCrcFun('crc-8-maxim')
print hex(crc8('\x04\x91\xe8\x03\x00'))

ft232h.setup(7, GPIO.OUT) # Make pin D7 a digital output
ft232h.setup(6, GPIO.IN) # Make pin D6 a digital input
ft232h.setup(8, GPIO.OUT) # Make pin C0 a digital output
ft232h.setup(9, GPIO.IN) # Make pin C1 a digital input

f= open("results.csv","w")
#response = spi.transfer([0x3C, 0x00, 0x03, 0x92, 0x87, 0x40, 0xE8, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])
response = spi.transfer([0x3C, 0x00, 0x03, 0x92, 0x86, 0xC0, 0xA0, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])
#response = spi.transfer([0x3C, 0x00, 0x02, 0xB2, 0x01, 0x82, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])
spi.write([0x3C, 0x00, 0x03, 0x94, 0xE7, 0x01, 0x7B, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])
#spi.write([0x3C, 0x00, 0x03, 0x93, 0xc4, 0x89, 0xdb, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])
#pixels = spi.transfer([0x3C, 0x00, 0x01, 0x15, 0xB8, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])
#print pixels
intval = hex(4)
b1, b0 = bytes(4)
data = [0x04, 0x91, b0, b1, 0x00]
crc_input = ''.join([chr(x) for x in data])
crc = (crc8(crc_input))
#integset = ([0x3C, 0x00, 0x04, 0x91, b0, b1, 0x00, crc, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])
#integcmd = ''.join([chr(x) for x in integset])
#print integset
#spi.write(integcmd)			
			
'''for i in range(100000):
for a in range(10, 100, 10):	
	#print("reading integration time %dms" % a)
	print("reading integration time %dms" % 4)
	ft232h.output(7, GPIO.HIGH)
	# Sleep for .1 second.
	#time.sleep(0.1)
	
		#time.sleep(inttime/1000 +1)
	counter = 0
	while(ft232h.input(6) != GPIO.HIGH):
		time.sleep(0.01)
		counter = counter +1
		if counter == 10000:
			print("failed to trigger\n")
			break
	ft232h.output(7, GPIO.LOW)
		#level = ft232h.input(6)
		
		#if level == GPIO.HIGH:
			#print("\n success!")
	f.write("\n")
			#for i in range(1,1024,1): #readout 512 ish bytes 4 times
				#print("round %d \n" % i)
	response = list(spi.read(2060))
				#response = list(spi.read(250))
			#print("response = %s" % (response))
	for y in range(1, len(response)-2, 2):
		msb = (response[y]) & 0xff
		lsb = (response[y+1]) & 0xff
		result = (msb << 8) | lsb
				#result = (int(response[i])<<8 | int(response[i + 1]))
		f.write("%d," % result)
				#print result
		#else:
		#	print("failed to trigger.")'''

#for a in range(4, 1001, 1):
for a in range(4, 100, 10):
	#inttime = random.randint(1,5000)
	#inttime = 8
	inttime = a
	#intval = hex(a)
	#b1, b0 = bytes(a)
	b1, b0 = bytes(inttime)
	
	data = [0x04, 0x91, b0, b1, 0x00]
	crc_input = ''.join([chr(x) for x in data])
	crc = (crc8(crc_input))
	print("new way: %s (from %s)" % (crc, crc_input))
	integset = ([0x3C, 0x00, 0x04, 0x91, b0, b1, 0x00, crc, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])
	integcmd = ''.join([chr(x) for x in integset])
	print integset
	spi.write(integcmd)
	time.sleep(0.1)
	
	for i in range(1):
		#	while(ft232h.input(6)!= GPIO.LOW): #for D6, D7 triggering
		while(ft232h.input(9)!= GPIO.LOW): #for C0, C1 triggering
			time.sleep(0.01)
			spi.read(2050) #flush buffer
		#print("reading integration time %dms" % a)
		print("reading integration time %dms" % inttime)
		ft232h.output(7, GPIO.HIGH)
		ft232h.output(8, GPIO.HIGH)
		# Sleep for .1 second.
		#time.sleep(inttime/1000)
		time.sleep(0.0045)
		ft232h.output(7, GPIO.LOW)
		ft232h.output(8, GPIO.LOW)
		#time.sleep(inttime/1000 +1)
		counter = 0
		while(ft232h.input(9) != GPIO.HIGH): # for C0, C1 triggering
		#while(ft232h.input(6) != GPIO.HIGH): # for D6, D7 triggering
			time.sleep(0.01)
			
			if counter != 10000:
				counter = counter +1
			else:
				print("failed to trigger\n")
				break
		print counter
		#level = ft232h.input(6)
		
		#if level == GPIO.HIGH:
			#print("\n success!")
		f.write("\n")
			#for i in range(1,1024,1): #readout 512 ish bytes 4 times
				#print("round %d \n" % i)
		response = list(spi.read(2050))
				#response = list(spi.read(250))
			#print("response = %s" % (response))
		for y in range(1, len(response)-2, 2):
			msb = (response[y]) & 0xff
			lsb = (response[y+1]) & 0xff
			result = (msb << 8) | lsb
				#result = (int(response[i])<<8 | int(response[i + 1]))
			f.write("%d," % result)
				#print result
		#else:
		#	print("failed to trigger.")
			

			#for a in range(1,1024,1):
#	bytes = spi.read(2)
#	pixel = ((bytes[0]*256) + bytes[1])
#	f.write("%f \n" % pixel)
#	print pixel	
		
f.close()	


'''spi.write([0x3C, 0x00, 0x04, 0x91, 0xe8, 0x03, 0x00, 0xC6, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00]) #integration time 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])
#spi.write([0x3C, 0x00, 0x03, 0x94, 0x00, 0x01, 0x60, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00]) #gain
#spi.write([0x3C, 0x00, 0x03, 0x93, 0x88, 0x93, 0xEE, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00]) #offset
response = spi.transfer([0x3C, 0x00, 0x03, 0x92, 0x86, 0xC0, 0xA0, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])
for i in range(1, (len(response)-1), 2):
	print (response[i]*256 + response[i + 1])'''
#spi.write([0x3C, 0x00, 0x01, 0x6F, 0xE0, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])
#spi.write([0x3C, 0x00, 0x01, 0x0A, 0xBA, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])




		

		
#	spi.write([0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])
##spi.write([0x3C, 0x00, 0x01, 0x12, 0xE5, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])
#spi.write([0x3C, 0x00, 0x01, 0x0A, 0xBA, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])
#0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])
#spi.write([0x3C, 0x00, 0x01, 0x10, 0x07, 0x3E])
#spi.write([0x3C, 0x00, 0x01, 0x10, 0x07, 0x3E])
#spi.write([0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])
"""								r_mem_data_rd(0) <= r_test_pattern;
								r_mem_data_rd(1) <= r_select_uc_spi;--default
								r_mem_data_rd(2) <= r_select_usb_fs;--default
								r_mem_data_rd(3) <= r_laser_modulation;
								r_mem_data_rd(4) <= r_laser_enable;
								r_mem_data_rd(5) <= r_read_ccd_always;
								r_mem_data_rd(6) <= r_enable_threshold;--second
								r_mem_data_rd(7) <= r_select_ext_trigger; --this is first bit out.
								

								r_mem_data_rd(0) <= r_tec_ad_n;--last
								r_mem_data_rd(1) <= r_link_laser_to_int;
								r_mem_data_rd(2) <= r_select_int_active;
								r_mem_data_rd(3) <= r_laser_ramp_enable;
								r_mem_data_rd(4) <= r_select_area_scan;
								r_mem_data_rd(5) <= r_select_second_laser;
								r_mem_data_rd(6) <= r_dac_clr_n; --default
								r_mem_data_rd(7) <= r_trigger_mode;"""
								
								